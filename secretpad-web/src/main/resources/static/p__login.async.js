"use strict";(self.webpackChunksecretpad=self.webpackChunksecretpad||[]).push([[7179],{59357:function(ne,Z,e){e.r(Z),e.d(Z,{default:function(){return ee}});var P=e(90819),c=e.n(P),E=e(89933),x=e.n(E),A=e(4977),M=e.n(A),$=e(78796),z=e.n($),D=e(41553),f=e.n(D),G=e(49488),R=e.n(G),O=e(84047),U=e.n(O),Y=e(10154),h=e.n(Y),C=e(97627),H=e(58757),m=e(62664),J=e(34178),K=e(98221),Q=e(34517),I=e(90634),V=e(45332),W=e.n(V),X=e(9580),p=e(90221),L=e(92326),w=e(80271),l={loginForm:"loginForm___TRgl0",title:"title___icapA",slogan:"slogan___gunaG",loginInput:"loginInput___TemLQ",loginBtnItem:"loginBtnItem___tY9ZZ",loginBtn:"loginBtn___iJclM"},t=e(35667),k=function(i){var u=X.default.Title,n=(0,H.useState)(!1),g=W()(n,2),S=g[0],s=g[1],j=function(){var T=x()(c()().mark(function d(v){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s(!0),r.next=3,i.onConfirm(v);case 3:s(!1);case 4:case"end":return r.stop()}},d)}));return function(v){return T.apply(this,arguments)}}();return(0,t.jsxs)("div",{className:l.loginForm,children:[(0,t.jsx)(u,{level:3,className:l.title,children:"\u9690\u79C1\u8BA1\u7B97\u5E73\u53F0\u767B\u5F55"}),(0,t.jsxs)(p.Z,{name:"basic",initialValues:{remember:!0},onFinish:j,autoComplete:"off",children:[(0,t.jsx)(p.Z.Item,{label:"",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u60A8\u7684\u8D26\u53F7"}],children:(0,t.jsx)(L.Z,{className:l.loginInput,size:"large",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u8D26\u53F7"})}),(0,t.jsx)(p.Z.Item,{label:"",name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}],children:(0,t.jsx)(L.Z.Password,{className:l.loginInput,size:"large",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"})}),(0,t.jsx)(p.Z.Item,{className:l.loginBtnItem,children:(0,t.jsx)(w.ZP,{className:l.loginBtn,type:"primary",size:"large",htmlType:"submit",loading:S,children:"\u767B\u5F55"})})]})]})},F={content:"content___rK2in",left:"left___ftgMv",right:"right___vvwnE"},b=e(65494),q=function(){var i=(0,I.tT)(_);return(0,t.jsxs)("div",{className:F.content,children:[(0,t.jsx)("div",{className:F.left}),(0,t.jsx)("div",{className:F.right,children:(0,t.jsx)(k,{onConfirm:i.loginConfirm})})]})},_=function(y){R()(u,y);var i=U()(u);function u(){var n;z()(this,u);for(var g=arguments.length,S=new Array(g),s=0;s<g;s++)S[s]=arguments[s];return n=i.call.apply(i,[this].concat(S)),h()(f()(n),"token",""),h()(f()(n),"loginService",(0,I.PD)(b.r)),h()(f()(n),"interpreterService",(0,I.PD)(K.m)),h()(f()(n),"loginConfirm",function(){var j=x()(c()().mark(function T(d){var v,o,r,N,B;return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.loginService.login({name:d.name,password:d.password});case 2:if(v=a.sent,o=v.status,r=v.data,N=localStorage.getItem("notFirstTimeIn"),n.token=(r==null?void 0:r.token)||"",n.loginService.userInfo=r,(o==null?void 0:o.code)!==0){a.next=22;break}if(localStorage.setItem("User-Token",n.token),n.loginService.userInfo.platformType!==J.t4.AUTONOMY){a.next=17;break}if(!n.loginService.userInfo.ownerId){a.next=17;break}return localStorage.setItem("neverLogined","true"),m.m8.push("/edge?nodeId=".concat(n.loginService.userInfo.ownerId)),C.ZP.success("\u767B\u5F55\u6210\u529F"),n.interpreterService.getComponentI18n(),a.abrupt("return");case 17:n.loginService.userInfo.platformType==="EDGE"?n.loginService.userInfo.ownerId&&(localStorage.setItem("neverLogined","true"),m.m8.push("/node?nodeId=".concat(n.loginService.userInfo.ownerId))):(localStorage.setItem("neverLogined","true"),N||!Q.Z.guide?m.m8.push("/"):(n.loginService.userInfo.platformType==="CENTER"&&((B=n.loginService.userInfo)===null||B===void 0?void 0:B.ownerType)==="EDGE"?m.m8.push("/"):m.m8.push("/guide"),localStorage.setItem("notFirstTimeIn","true"))),C.ZP.success("\u767B\u5F55\u6210\u529F"),n.interpreterService.getComponentI18n(),a.next=23;break;case 22:C.ZP.error((o==null?void 0:o.msg)||"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7528\u6237\u540D\u6216\u5BC6\u7801");case 23:case"end":return a.stop()}},T)}));return function(T){return j.apply(this,arguments)}}()),n}return M()(u)}(I.Hn),ee=q}}]);
